package google;

import java.util.*;

public class rectangleRandomPick {

	
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		
		int[][] rects = {{1,2,3,4}, {5,6,9,10}, {11,13,15,17}, {10,20, 30, 40}};
		
		//pickFromOneRect(rects[3]);
		
		pickFromMoreRect(rects);
		
		
	}
	
	public static void pickFromOneRect(int[] rect) {
		Random ran = new Random();
		int newX = rect[0] + ran.nextInt(rect[2] - rect[0] + 1);
		int newY = rect[1] + ran.nextInt(rect[3] - rect[1] + 1);
		System.out.println("point picked: (" + newX + ", " + newY + ")"); 
	}
	
	public static void pickFromMoreRect(int[][] rects) {
		
		int[] weights = new int[rects.length];
		int sum = 0;
		for (int i = 0; i < rects.length; i++) {
			int[] r = rects[i];
			int area = (r[3] - r[1]) * (r[2] - r[0]);
			sum += area;
			weights[i] = sum;
			System.out.println(i + " - " + sum + " - " + i);
		}
		
		Random ran = new Random();
		double pick = ran.nextInt(sum);
		System.out.println("Random pick: " + pick);
		int left = 0;
		int right = weights.length - 1;
		
		while (left < right && left + 1 != right) {
			int mid = left + (right - left) / 2;
			if (pick > weights[mid]) {
				left = mid;
			}
			else {
				right = mid;
			}
		}
		
		if (pick <= left) {
			System.out.println("pick " + left + " rect");
			pickFromOneRect(rects[left]);
		}
		else {
			System.out.println("pick " + right + " rect");
			pickFromOneRect(rects[right]);
		}
	}
	
	public static void pickFromMoreRectOverlap(int[][] rects) {
	}
	

}
